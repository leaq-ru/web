<template>
  <b-container fluid="xl">
    <Header />
    <Breadcrumb :items="breadcrumb" />

    <h2>
      –¢–∞—Ä–∏—Ñ—ã
    </h2>

    <h3 id="data">
      –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
    </h3>

    <Plans :companies-total-count="companiesTotalCount" />

    <h3 id="company" class="mt-5">
      –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π
    </h3>

    <b-card-group deck>
      <b-card
        class="mt-3"
        no-body
      >
        <b-card-header>
          –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ
        </b-card-header>

        <b-list-group flush>
          <b-list-group-item>
            <span class="font-weight-bold">
              –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
            </span>
          </b-list-group-item>
        </b-list-group>

        <b-card-body>
          <ul>
            <li>
              –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ—é –∏–ª–∏ —á—É–∂—É—é –∫–æ–º–ø–∞–Ω–∏—é –≤ –∫–∞—Ç–∞–ª–æ–≥
            </li>

            <li>
              –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∞–≤ –Ω–∞ —Å–∞–π—Ç, –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞–∫

              <PatchCheck />

              –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–ø–∞–Ω–∏–∏
            </li>
          </ul>
        </b-card-body>

        <b-card-footer footer-bg-variant="white">
          <b-button
            to="/account/companies/apply"
            variant="primary"
          >
            –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
          </b-button>
        </b-card-footer>
      </b-card>

      <b-card
        class="mt-3"
        border-variant="success"
        body-border-variant="success"
        no-body
      >
        <b-card-header
          header-bg-variant="success"
          header-text-variant="white"
        >
          <b-icon-lightning-fill />

          –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ
        </b-card-header>

        <b-list-group flush>
          <b-list-group-item>
            <span class="font-weight-bold">
              {{ priceCompanyPremium }}
            </span>

            <span class="text-muted">
              —Ä—É–± / –º–µ—Å
            </span>
          </b-list-group-item>
        </b-list-group>

        <b-card-body>
          –í—Å–µ –∏–∑ ¬´–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ¬ª, –ø–ª—é—Å:

          <ul>
            <li>
              –í–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è –≤—ã—à–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≤–æ –≤—Å–µ—Ö –ø–æ–∏—Å–∫–∞—Ö –∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
            </li>

            <li>
              –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–¥—Å–≤–µ—á–µ–Ω–∞ –∑–µ–ª–µ–Ω—ã–º –∏ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
            </li>

            <li>
              –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∑–Ω–∞–∫

              <PatchLightning />

              –≤—ã–¥–µ–ª—è–µ—Ç –∫–æ–º–ø–∞–Ω–∏—é —Å—Ä–µ–¥–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
            </li>
          </ul>
        </b-card-body>

        <b-card-footer footer-bg-variant="white">
          <b-row>
            <b-col md="6">
              <b-button
                to="/account/companies"
                variant="success"
              >
                –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –∫–æ–º–ø–∞–Ω–∏–∏
              </b-button>
            </b-col>

            <b-col md="6" class="pt-md-0 pt-2">
              <b-button
                to="/#results"
                variant="outline-success"
              >
                –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç?
              </b-button>
            </b-col>
          </b-row>
        </b-card-footer>
      </b-card>
    </b-card-group>

    <div class="d-flex justify-content-center mt-5">
      <img class="max-50-px" src="/payment-logos/cards.png" alt="–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π">
      <img class="max-50-px" src="/payment-logos/qiwi.png" alt="–û–ø–ª–∞—Ç–∞ Qiwi">
      <img class="max-50-px" src="/payment-logos/yandex.png" alt="–û–ø–ª–∞—Ç–∞ Yandex.Money">
      <img class="max-50-px" src="/payment-logos/webmoney.png" alt="–û–ø–ª–∞—Ç–∞ WebMoney">
    </div>

    <Footer />
  </b-container>
</template>

<script lang="ts">
import Vue from 'vue'
import apiAddr from '~/helpers/const/apiAddr'
import makeTitle from '~/helpers/makeTitle'
import price from '~/helpers/price'

export default Vue.extend({
  async asyncData (): Promise<object> {
    const raw = await fetch([
      apiAddr,
      '/v1/company/getTotalCount'
    ].join(''))

    const res = await raw.json()

    return {
      companiesTotalCount: res.totalCount
    }
  },
  data () {
    return {
      breadcrumb: [{
        id: 1,
        text: 'üè†',
        to: {
          path: '/'
        }
      }, {
        id: 2,
        text: '–¢–∞—Ä–∏—Ñ—ã',
        to: {
          path: '/plans'
        }
      }],
      priceCompanyPremium: price.companyPremium
    }
  },
  head () {
    return {
      title: makeTitle('–¢–∞—Ä–∏—Ñ—ã'),
      meta: [{
        hid: 'description',
        name: 'description',
        content: '–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤'
      }]
    }
  }
})
</script>

<style scoped>
.max-50-px {
  max-width: 50px;
  max-height: 50px;
}
</style>
