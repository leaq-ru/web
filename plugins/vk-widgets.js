// VK openapi
if ((function (t) { if (!t.fastXDM) { const e = {}; const o = {}; var i = []; var n = {}; t.fastXDM = { _id: 0, helperUrl: 'https://vk.com/js/api/xdmHelper.js', Server (o, i, n) { this.methods = o || {}, this.filter = i, this.options = n || {}, this.id = t.fastXDM._id++, this.key = (function () { for (var t = '', e = 0; e < 5; e++) { t += Math.ceil(15 * Math.random()).toString(16) } return t }()), this.frameName = 'fXD' + this.key, this.server = !0, this.methods['%init%'] = this.methods.__fxdm_i = function () { d(function (e) { for (const o in this.methods) { if (this.methods[o] instanceof t.fastXDM.Server) { const i = this.methods[o]; e.protocol === 'p' && e.send(this, e.json.stringify(['%proxy%', [o, i.key]])), this.methods[o] = function () { this.callMethod.apply(this, arguments) }.bind(i) } } }, this), t.fastXDM.run(this.id), this.methods.onInit && this.methods.onInit() }, e[this.key] = [c, this] }, Client (i, n) { if (this.methods = i || {}, this.options = n || {}, this.id = t.fastXDM._id++, this.client = !0, t.fastXDM.run(this.id), window.name.indexOf('fXD') !== 0) { throw new Error('Wrong window.name property.') } this.key = window.name.substr(3), this.caller = window.parent, o[this.key] || (o[this.key] = {}), this.methods['%proxy%'] = function (t, e) { t && e && this.caller.frames['fXD' + e] && (o[this.key][t] = { key: e, frame: { contentWindow: this.caller.frames['fXD' + e] } }) }.bind(this), e[this.key] = [c, this], t.fastXDM.on('helper', function () { t.fastXDM.onClientStart(this) }, this), d(function (t) { t.send(this, t.json.stringify(['%init%'])); const e = this.methods; setTimeout(function () { e.onInit && e.onInit() }, 0) }, this) }, onMessage (t) { const o = t.data; if (!o) { return !1 } if (typeof o !== 'string' && !(o instanceof String)) { return !1 } const i = o.substr(0, 5); if (e[i]) { const n = e[i][1]; !n || n.filter && !n.filter(t.origin) || e[i][0](o.substr(6), n, t.origin) } }, setJSON (t) { n.json = t }, getJSON (t) { if (!t) { return n.json } d(function (e) { t(e.json) }) }, getProxyToServer (t, e) { return o[t] && o[t][e] }, setEnv (t) { for (const e in t) { n[e] = t[e] }l() }, _q: {}, on (t, e, o) { this._q[t] || (this._q[t] = []), this._q[t] == -1 ? e.apply(o) : this._q[t].push([e, o]) }, run (t) { for (let e = (this._q[t] || []).length, o = 0; o < e; o++) { this._q[t][o][0].apply(this._q[t][o][1]) } this._q[t] = -1 }, waitFor: r }, t.fastXDM.Server.prototype.start = function (e, o) { if (e.contentWindow) { this.caller = e.contentWindow, this.frame = e, t.fastXDM.on('helper', function () { t.fastXDM.onServerStart(this) }, this) } else { const i = this; (o = o || 0) < 50 && setTimeout(function () { i.start.apply(i, [e, o + 1]) }, 100) } }, t.fastXDM.Server.prototype.destroy = function () { delete e[this.key] }, t.fastXDM.Server.prototype.append = function (t, e, o) { const i = document.createElement('DIV'); i.innerHTML = '<iframe name="' + this.frameName + '" ' + (o || '') + '></iframe>'; const n = i.firstChild; const r = this; return setTimeout(function () { n.frameBorder = '0', e && (function t (e, o) { for (const i in o) { e[i] && typeof e[i] === 'object' ? t(e[i], o[i]) : e[i] = o[i] } }(n, e)), t.insertBefore(n, t.firstChild), r.start(n) }, 0), n }, t.fastXDM.Client.prototype.callMethod = t.fastXDM.Server.prototype.callMethod = function () { for (var e = Array.prototype.slice.call(arguments), o = e.shift(), i = 0, n = e.length; i < n; i++) { if (typeof e[i] === 'function') { this.funcsCount = (this.funcsCount || 0) + 1; var s = e[i]; var l = '_func' + this.funcsCount; this.methods[l] = function () { s.apply(this, arguments), delete this.methods[l] }, e[i] = { _func: this.funcsCount } } else { this.options.safe && (e[i] = a(e[i], !1)) } }r(this, 'caller', function () { t.fastXDM.on(this.id, function () { d(function (i) { let n = this; const r = t.fastXDM.getProxyToServer(this.key, o); r && (n = r, o = e.shift()), i.send(n, i.json.stringify([o, e])) }, this) }, this) }, this) }, t.fastXDM.Client.prototype.isUnsafeMethod = t.fastXDM.Server.prototype.isUnsafeMethod = function (t) { return ~['%proxy%', '%init%'].indexOf(t) || this.options.unsafeMethods && ~this.options.unsafeMethods.indexOf(t) }, t.JSON && typeof t.JSON === 'object' && t.JSON.parse && t.JSON.stringify && t.JSON.stringify({ a: [1, 2, 3] }).replace(/ /g, '') === '{"a":[1,2,3]}' ? n.json = { parse: t.JSON.parse, stringify: t.JSON.stringify } : t.fastXDM._needJSON = !0, t.postMessage ? (n.protocol = 'p', n.send = function (t, e) { const o = t.frame ? t.frame.contentWindow : t.caller; if (o) { try { o.postMessage(t.key + ':' + e, '*') } catch (i) { window.postMessage.call(o, t.key + ':' + e, '*') } } }, t.addEventListener ? t.addEventListener('message', t.fastXDM.onMessage, !1) : t.attachEvent('onmessage', t.fastXDM.onMessage), t.fastXDM._needJSON ? (t.fastXDM._onlyJSON = !0, s()) : l()) : s() } function r (t, e, o, i, n) { t[e] ? o.apply(i) : (n = n || 0) < 1e3 && setTimeout(function () { r(t, e, o, i, n + 1) }, 0) } function s (e) { setTimeout(function () { const o = document.createElement('script'); o.type = 'text/javascript', o.src = e || t.fastXDM.helperUrl, r(document, 'body', function () { document.getElementsByTagName('HEAD')[0].appendChild(o) }) }, 0) } function a (t, e) { let o; switch (typeof t) { case 'string':o = e ? t.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;') : t.replace(/&#039;/g, "'").replace(/&quot;/g, '"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&'); break; case 'object':if (Object.prototype.toString.apply(t) === '[object Array]') { o = []; for (let i = 0, n = t.length; i < n; i++) { o[i] = a(t[i], e) } } else { for (const r in o = {}, t) { Object.hasOwnProperty.call(t, r) && (o[r] = a(t[r], e)) } } break; default:o = t } return o } function d (t, e) { n.loaded ? t.apply(e, [n]) : i.push([e, t]) } function l () { n.loaded = !0; for (let t = 0, e = i.length; t < e; t++) { i[t][1].apply(i[t][0], [n]) } } function c (e, o, i) { d(function (n) { const r = n.json.parse(e); const s = r[0]; if (s) { if (n.protocol === 'p' && o.options.sameOrigin && i !== t.origin && !o.isUnsafeMethod(s)) { throw new Error('Insecure method call.') } r[1] || (r[1] = []); for (let d = 0, l = r[1].length; d < l; d++) { if (r[1][d] && r[1][d]._func) { var c = r[1][d]._func; r[1][d] = function () { const t = Array.prototype.slice.call(arguments); t.unshift('_func' + c), o.callMethod.apply(o, t) } } else { o.options.safe && (r[1][d] = a(r[1][d], !0)) } }setTimeout(function () { if (!o.methods[s]) { throw new Error('fastXDM: Method ' + s + ' is undefined') } o.methods[s].apply(o, r[1]) }, 0) } }) } }(window)), window.VK || (window.VK = {}), VK.MD5 || (VK.MD5 = function (t) { let e; const o = function (t, e) { const o = (65535 & t) + (65535 & e); return (t >> 16) + (e >> 16) + (o >> 16) << 16 | 65535 & o }; const i = function (t, e, i, n, r, s) { return o((function (t, e) { return t << e | t >>> 32 - e }(o(o(e, t), o(n, s)), r)), i) }; const n = function (t, e, o, n, r, s, a) { return i(e & o | ~e & n, t, e, r, s, a) }; const r = function (t, e, o, n, r, s, a) { return i(e & n | o & ~n, t, e, r, s, a) }; const s = function (t, e, o, n, r, s, a) { return i(e ^ o ^ n, t, e, r, s, a) }; const a = function (t, e, o, n, r, s, a) { return i(o ^ (e | ~n), t, e, r, s, a) }; return (function (t) { for (var e, o = '0123456789abcdef', i = '', n = 0, r = t.length; n < r; n++) { e = t.charCodeAt(n), i += o.charAt(e >>> 4 & 15) + o.charAt(15 & e) } return i }(function (t) { for (var e = '', o = 0, i = 32 * t.length; o < i; o += 8) { e += String.fromCharCode(t[o >> 5] >>> o % 32 & 255) } return e }(function (t, e) { let i; let d; let l; let c; let u = 1732584193; let p = -271733879; let h = -1732584194; let f = 271733878; t[e >> 5] |= 128 << e % 32, t[14 + (e + 64 >>> 9 << 4)] = e; for (let m = 0, g = t.length; m < g; m += 16) { i = u, d = p, l = h, c = f, u = n(u, p, h, f, t[m + 0], 7, -680876936), f = n(f, u, p, h, t[m + 1], 12, -389564586), h = n(h, f, u, p, t[m + 2], 17, 606105819), p = n(p, h, f, u, t[m + 3], 22, -1044525330), u = n(u, p, h, f, t[m + 4], 7, -176418897), f = n(f, u, p, h, t[m + 5], 12, 1200080426), h = n(h, f, u, p, t[m + 6], 17, -1473231341), p = n(p, h, f, u, t[m + 7], 22, -45705983), u = n(u, p, h, f, t[m + 8], 7, 1770035416), f = n(f, u, p, h, t[m + 9], 12, -1958414417), h = n(h, f, u, p, t[m + 10], 17, -42063), p = n(p, h, f, u, t[m + 11], 22, -1990404162), u = n(u, p, h, f, t[m + 12], 7, 1804603682), f = n(f, u, p, h, t[m + 13], 12, -40341101), h = n(h, f, u, p, t[m + 14], 17, -1502002290), p = n(p, h, f, u, t[m + 15], 22, 1236535329), u = r(u, p, h, f, t[m + 1], 5, -165796510), f = r(f, u, p, h, t[m + 6], 9, -1069501632), h = r(h, f, u, p, t[m + 11], 14, 643717713), p = r(p, h, f, u, t[m + 0], 20, -373897302), u = r(u, p, h, f, t[m + 5], 5, -701558691), f = r(f, u, p, h, t[m + 10], 9, 38016083), h = r(h, f, u, p, t[m + 15], 14, -660478335), p = r(p, h, f, u, t[m + 4], 20, -405537848), u = r(u, p, h, f, t[m + 9], 5, 568446438), f = r(f, u, p, h, t[m + 14], 9, -1019803690), h = r(h, f, u, p, t[m + 3], 14, -187363961), p = r(p, h, f, u, t[m + 8], 20, 1163531501), u = r(u, p, h, f, t[m + 13], 5, -1444681467), f = r(f, u, p, h, t[m + 2], 9, -51403784), h = r(h, f, u, p, t[m + 7], 14, 1735328473), p = r(p, h, f, u, t[m + 12], 20, -1926607734), u = s(u, p, h, f, t[m + 5], 4, -378558), f = s(f, u, p, h, t[m + 8], 11, -2022574463), h = s(h, f, u, p, t[m + 11], 16, 1839030562), p = s(p, h, f, u, t[m + 14], 23, -35309556), u = s(u, p, h, f, t[m + 1], 4, -1530992060), f = s(f, u, p, h, t[m + 4], 11, 1272893353), h = s(h, f, u, p, t[m + 7], 16, -155497632), p = s(p, h, f, u, t[m + 10], 23, -1094730640), u = s(u, p, h, f, t[m + 13], 4, 681279174), f = s(f, u, p, h, t[m + 0], 11, -358537222), h = s(h, f, u, p, t[m + 3], 16, -722521979), p = s(p, h, f, u, t[m + 6], 23, 76029189), u = s(u, p, h, f, t[m + 9], 4, -640364487), f = s(f, u, p, h, t[m + 12], 11, -421815835), h = s(h, f, u, p, t[m + 15], 16, 530742520), p = s(p, h, f, u, t[m + 2], 23, -995338651), u = a(u, p, h, f, t[m + 0], 6, -198630844), f = a(f, u, p, h, t[m + 7], 10, 1126891415), h = a(h, f, u, p, t[m + 14], 15, -1416354905), p = a(p, h, f, u, t[m + 5], 21, -57434055), u = a(u, p, h, f, t[m + 12], 6, 1700485571), f = a(f, u, p, h, t[m + 3], 10, -1894986606), h = a(h, f, u, p, t[m + 10], 15, -1051523), p = a(p, h, f, u, t[m + 1], 21, -2054922799), u = a(u, p, h, f, t[m + 8], 6, 1873313359), f = a(f, u, p, h, t[m + 15], 10, -30611744), h = a(h, f, u, p, t[m + 6], 15, -1560198380), p = a(p, h, f, u, t[m + 13], 21, 1309151649), u = a(u, p, h, f, t[m + 4], 6, -145523070), f = a(f, u, p, h, t[m + 11], 10, -1120210379), h = a(h, f, u, p, t[m + 2], 15, 718787259), p = a(p, h, f, u, t[m + 9], 21, -343485551), u = o(u, i), p = o(p, d), h = o(h, l), f = o(f, c) } return [u, p, h, f] }((function (t) { let e; let o; const i = Array(t.length >> 2); for (e = 0, o = i.length; e < o; e++) { i[e] = 0 } for (e = 0, o = 8 * t.length; e < o; e += 8) { i[e >> 5] |= (255 & t.charCodeAt(e / 8)) << e % 32 } return i }(e = (function (t) { for (var e, o, i = '', n = -1, r = t.length; ++n < r;) { e = t.charCodeAt(n), o = n + 1 < r ? t.charCodeAt(n + 1) : 0, e >= 55296 && e <= 56319 && o >= 56320 && o <= 57343 && (e = 65536 + ((1023 & e) << 10) + (1023 & o), n++), e <= 127 ? i += String.fromCharCode(e) : e <= 2047 ? i += String.fromCharCode(192 | e >>> 6 & 31, 128 | 63 & e) : e <= 65535 ? i += String.fromCharCode(224 | e >>> 12 & 15, 128 | e >>> 6 & 63, 128 | 63 & e) : e <= 2097151 && (i += String.fromCharCode(240 | e >>> 18 & 7, 128 | e >>> 12 & 63, 128 | e >>> 6 & 63, 128 | 63 & e)) } return i }(t)))), 8 * e.length)))) }), VK.extend = function (t, e, o) { for (const i in e) { (o || void 0 === t[i]) && (t[i] = e[i]) } return t }, VK.extend(VK, { _domain: { base: 'https://vk.com', login: 'https://login.vk.com', main: 'https://oauth.vk.com', api: 'https://api.vk.com' } }, !0), VK.xdConnectionCallbacks) { setTimeout(function () { for (var t; t = VK.xdConnectionCallbacks.pop();) { t() } }, 0), VK.Widgets && !VK.Widgets._constructor && (VK.Widgets = !1) } else { function obj2qs (t) { if (!t) { return '' } const e = []; for (const o in t) { t.hasOwnProperty(o) && e.push(encodeURIComponent(o) + '=' + encodeURIComponent(t[o].toString() || '')) } return e.length ? '?' + e.join('&') : '' }VK.extend(VK, { version: 1, _apiId: null, _session: null, _userStatus: 'unknown', _path: { login: 'authorize', proxy: 'fxdm_oauth_proxy.html' }, _rootId: 'vk_api_transport', _nameTransportPath: '', xdReady: !1, access: { FRIENDS: 2, PHOTOS: 4, AUDIO: 8, VIDEO: 16, MATCHES: 32, QUESTIONS: 64, WIKI: 128 } }), VK.init = function (t) { let e, o; if (VK._apiId = null, !t.apiId) { throw new Error('VK.init() called without an apiId') } if (VK._apiId = t.apiId, t.onlyWidgets) { return !0 } t.nameTransportPath && t.nameTransportPath !== '' && (VK._nameTransportPath = t.nameTransportPath), (o = document.getElementById(VK._rootId)) || ((o = document.createElement('div')).id = VK._rootId, (e = document.getElementsByTagName('body')[0]).insertBefore(o, e.childNodes[0])), o.style.position = 'absolute', o.style.top = '-10000px'; const i = VK.Cookie.load(); i && (VK.Auth._loadState = 'loaded', VK.Auth.setSession(i, i ? 'connected' : 'unknown')) }, VK.Cookie || (VK.Cookie = { _domain: null, load () { let t; const e = document.cookie.match('\\bvk_app_' + VK._apiId + '=([^;]*)\\b'); if (e) { if ((t = this.decode(e[1])).secret != 'oauth') { return !1 } t.expire = parseInt(t.expire, 10), VK.Cookie._domain = '.' + window.location.hostname } return t }, setRaw (t, e, o, i) { let n; n = 'vk_app_' + VK._apiId + '=' + t; const r = i ? (new Date()).getTime() + 1e3 * i : 1e3 * e; n += t && e === 0 ? '' : '; expires=' + new Date(r).toGMTString(), n += '; path=/', n += o ? '; domain=.' + o : '', document.cookie = n, this._domain = o }, set (t, e) { t ? this.setRaw(this.encode(t), t.expire, window.location.hostname, (e || {}).time) : this.clear() }, clear () { this.setRaw('', 0, this._domain, 0) }, encode (t) { let e; const o = []; for (e in t) { e != 'user' && o.push(encodeURIComponent(e) + '=' + encodeURIComponent(t[e])) } return o.sort(), o.join('&') }, decode (t) { let e; let o; const i = {}; const n = t.split('&'); for (e = 0; e < n.length; e++) { (o = n[e].split('=', 2)) && o[0] && (i[decodeURIComponent(o[0])] = decodeURIComponent(o[1])) } return i } }), VK.Api || (VK.Api = { _headId: null, _callbacks: {}, ie6_7 () { return VK.Api.ieTested || (VK.Api.isIE6_7 = navigator.userAgent.match(/MSIE [6|7]/i), VK.Api.ieTested = !0), VK.Api.isIE6_7 }, supportCORS () { return 'withCredentials' in new XMLHttpRequest() || typeof XDomainRequest !== 'undefined' }, makeRequest (t, e) { const o = VK.Api.createRequest('GET', t); return !!o && (o.onload = function () { const t = o.responseText; if (o.status === 200) { e(t) } else { try { console.error('Open api access error', o.response) } catch (t) {} } }, o.onerror = function () { try { console.error('Open api access error') } catch (t) {} }, o.send(), !0) }, createRequest (t, e) { let o = new XMLHttpRequest(); return 'withCredentials' in o ? (o.open(t, e, !0), o.withCredentials = !0) : typeof XDomainRequest !== 'undefined' ? ((o = new XDomainRequest()).open(t, e), o.withCredentials = !0) : o = null, o }, attachScript (t) { VK.Api._headId || (VK.Api._headId = document.getElementsByTagName('head')[0]); const e = document.createElement('script'); e.type = 'text/javascript', e.setAttribute('encoding', 'UTF-8'), e.src = t, VK.Api._headId.appendChild(e) }, checkMethod (t, e, o, i) { const n = t.toLowerCase(); if (n === 'wall.post') { var r; let s; var a; var d; const l = /(^https?:\/\/)|(^(poll|album|photo|video|doc|audio|page|note)-?\d+_-?\d+)$/; const c = []; e.v || (e.v = '5.95'), e.attachments = e.attachments || e.attachment || [], typeof e.attachments === 'string' && (e.attachments = e.attachments.split(',')); for (let u = 0; u < e.attachments.length; u++) { const p = e.attachments[u].trim(); l.test(p) && c.push(p) } return e.attachments = c.length ? c : '', r = '_' + Math.random().toString(16).substr(2), s = { act: 'wall_post_box', method: n, widget: 4, aid: parseInt(VK._apiId, 10), text: e.message || '', method_access: r }, (s = VK.extend(s, e)).owner_id = parseInt(e.owner_id || 0, 10), s.publish_date = e.publish_date || '', a = VK._domain.base + '/al_apps.php', a += obj2qs(s), VK.UI.popup({ url: a, width: 560, height: 304 }), d = setInterval(function () { VK.UI.active.closed && (clearInterval(d), e.method_access = r, VK.Api.call(t, e, o, i)) }, 500), !1 } return n != 'messages.allowmessagesfromgroup' || (r = '_' + Math.random().toString(16).substr(2), a = VK._domain.base + '/widget_allow_messages_from_community.php?act=allow_box&group_id=' + parseInt(e.group_id, 10) + '&app_id=' + parseInt(VK._apiId, 10) + '&method_access=' + r, VK.UI.popup({ url: a, width: 560, height: 304 }), d = setInterval(function () { VK.UI.active.closed && (clearInterval(d), e.method_access = r, VK.Api.call(t, e, o, i)) }, 500), !1) }, call (t, e, o, i) { let n; let r; const s = e || {}; if (typeof s !== 'object' || typeof o !== 'function') { return !1 } if (e.method_access || e.method_force || VK.Api.checkMethod(t, e, o, i)) { if (i || (i = 0), VK.Auth._loadState != 'loaded') { var a = function (i) { i && i.session && (VK.Observer.unsubscribe('auth.loginStatus', a), VK.Api.call(t, e, o)) }; return VK.Observer.subscribe('auth.loginStatus', a), void VK.Auth.getLoginStatus() } if (VK.Api.queryLength(s) < 1500 && !VK.Api.ie6_7()) { for (var d = !1, l = parseInt(1e7 * Math.random(), 10); VK.Api._callbacks[l];) { l = parseInt(1e7 * Math.random(), 10) }s.callback = 'VK.Api._callbacks[' + l + ']' } else { d = !0 }VK._session && VK._session.sid && (s.access_token = VK._session.sid), n = VK.Cookie.encode(s), r = function (n) { if (!n.error || n.error.error_code != 3 && n.error.error_code != 4 && n.error.error_code != 5) { o(n) } else { if (i > 3) { return !1 } var r = function (n) { VK.Observer.unsubscribe('auth.sessionChange', r), delete e.access_token, n.session && VK.Api.call(t, e, o, i + 1) }; VK.Observer.subscribe('auth.sessionChange', r), VK.Auth.getLoginStatus() }d || delete VK.Api._callbacks[l] }, d ? VK.xdReady ? VK.XDM.remote.callMethod('apiCall', t, n, r) : (VK.Observer.subscribe('xdm.init', function () { VK.XDM.remote.callMethod('apiCall', t, n, r) }), VK.XDM.init()) : (VK.Api._callbacks[l] = r, VK.Api.attachScript(VK._domain.api + '/method/' + t + '?' + n)) } }, queryLength (t) { let e; let o = 100; for (e in t) { o += e.length + encodeURIComponent(t[e]).length + 1 } return o } }, VK.api = function (t, e, o) { VK.Api.call(t, e, o) }), VK.Auth || (VK.Auth = { popup: null, lsCb: {}, setSession (t, e, o, i) { const n = !VK._session && t; const r = VK._session && !t; const s = VK._session && t && VK._session.mid != t.mid; const a = n || r || VK._session && t && VK._session.sid != t.sid; const d = e != VK._userStatus; const l = { session: t, status: e, settings: o }; return VK._session = t, VK._userStatus = e, VK.Cookie.set(t, i), (a || d || s) && setTimeout(function () { d && VK.Observer.publish('auth.statusChange', l), (r || s) && VK.Observer.publish('auth.logout', l), (n || s) && VK.Observer.publish('auth.login', l), a && VK.Observer.publish('auth.sessionChange', l) }, 0), l }, login (t, e) { if (!VK._apiId) { return !1 } let o = VK._domain.main + '/' + VK._path.login + '?client_id=' + VK._apiId + '&display=popup&redirect_uri=close.html&response_type=token&openapi=1'; e && parseInt(e, 10) > 0 && (o += '&scope=' + e), VK.Observer.unsubscribe('auth.onLogin'), VK.Observer.subscribe('auth.onLogin', t), VK.UI.popup({ width: 665, height: 370, url: o }); const i = function () { VK.Auth.getLoginStatus(function (t) { VK.Observer.publish('auth.onLogin', t), VK.Observer.unsubscribe('auth.onLogin') }, !0) }; VK.UI.popupOpened = !0; var n = function () { if (!VK.UI.popupOpened) { return !1 } try { if (!VK.UI.active.top || VK.UI.active.closed) { return VK.UI.popupOpened = !1, i(), !0 } } catch (t) { return VK.UI.popupOpened = !1, i(), !0 }setTimeout(n, 100) }; setTimeout(n, 100) }, logout (t) { VK.Auth.revokeGrants(t) }, revokeGrants (t) { var e = function (o) { VK.Observer.unsubscribe('auth.statusChange', e), t && t(o) }; if (VK.Observer.subscribe('auth.statusChange', e), VK._session && VK._session.sid) { const o = VK._domain.login + '?act=openapi&oauth=1&aid=' + parseInt(VK._apiId, 10) + '&location=' + encodeURIComponent(window.location.hostname) + '&do_logout=1&token=' + VK._session.sid; if (VK.Api.supportCORS()) { VK.Api.makeRequest(o + '&new=1', function () { VK.Auth.setSession(null, 'unknown') }) } else { VK.Api.attachScript(o) } }VK.Cookie.clear() }, getSession () { return VK._session }, getLoginStatus (cb, force) { if (VK._apiId) { if (cb) { if (!force && VK.Auth._loadState == 'loaded') { return void cb({ status: VK._userStatus, session: VK._session }) } VK.Observer.subscribe('auth.loginStatus', cb) } if (force || VK.Auth._loadState != 'loading') { VK.Auth._loadState = 'loading'; const url = VK._domain.login + '?act=openapi&oauth=1&aid=' + parseInt(VK._apiId, 10) + '&location=' + encodeURIComponent(window.location.hostname); if (VK.Api.supportCORS()) { const loginCallback = function (response) { if (this.JSON || (this.JSON = {}), response = typeof JSON.parse !== 'function' ? eval(response) : JSON.parse(response), VK.Auth._loadState = 'loaded', response && response.auth) { var session = { mid: response.user.id, sid: response.access_token, sig: response.sig, secret: response.secret, expire: response.expire }; force && (session.user = response.user); var status = 'connected' } else { var session = null; var status = response.user ? 'not_authorized' : 'unknown'; VK.Cookie.clear() }VK.Auth.setSession(session, status, !1, response), VK.Observer.publish('auth.loginStatus', { session, status }), VK.Observer.unsubscribe('auth.loginStatus') }; VK.Api.makeRequest(url + '&new=1', loginCallback) } else { for (var rnd = parseInt(1e7 * Math.random(), 10); VK.Auth.lsCb[rnd];) { rnd = parseInt(1e7 * Math.random(), 10) }VK.Auth.lsCb[rnd] = function (t) { if (delete VK.Auth.lsCb[rnd], VK.Auth._loadState = 'loaded', t && t.auth) { var e = { mid: t.user.id, sid: t.access_token, sig: t.sig, secret: t.secret, expire: t.expire }; force && (e.user = t.user); var o = 'connected' } else { e = null, o = t.user ? 'not_authorized' : 'unknown'; VK.Cookie.clear() }VK.Auth.setSession(e, o, !1, t), VK.Observer.publish('auth.loginStatus', { session: e, status: o }), VK.Observer.unsubscribe('auth.loginStatus') }, VK.Api.attachScript(url + '&rnd=' + rnd) } } } } }), VK.App || (VK.App = { _appOpened: !1, _addToGroupPopup: null, open (t, e) { !VK.App._appOpened && VK._apiId && (VK._session ? VK.App._openApp(t, e) : VK.Auth.login(function (o) { o && o.session && VK.App._openApp(t, e) })) }, _openApp (t, e) { let o; let i; const n = []; if (e = e || {}, t && VK._apiId && !VK.App._appOpened) { if (Object.prototype.toString.call(e.data) === '[object Object]') { try { e.data = JSON.stringify(e.data) } catch (t) { e.data = '' } } for (const r in o = VK._domain.base + '/apps?act=open_external_app_openapi&aid=' + VK._apiId, e.aid = VK._apiId, e) { let s = ''; e.hasOwnProperty(r) && (void 0 !== e[r] && (s = encodeURIComponent(e[r])), n.push(encodeURIComponent(r) + '=' + s)) }o += '&url=' + t, o += '&q=' + encodeURIComponent(n.join('&')), (i = VK.Util.Box(o, {}, { closeExternalApp () { VK.App._result ? (VK.Observer.publish('app.done', VK.App._result), VK.App._result = null) : VK.Observer.publish('app.closed'), i.hide(), VK.App._appOpened = !1 }, externalAppDone (t, e) { e ? VK.App._result = t : (VK.Observer.publish('app.done', t), i.hide(), VK.App._appOpened = !1, VK.App._result = null) } })).show(), VK.App._appOpened = !0, VK.App._result = null } }, addToGroup (t) { this._addToGroupPopup && !this._addToGroupPopup.closed || (this._onAddToGroupDone && VK.Util.removeEvent('message', this._onAddToGroupDone, window), this._onAddToGroupDone = function (t) { t.origin === VK._domain.base && t.data.method === 'app.addToGroup' && (VK.Observer.publish('app.addToGroupDone', { app_id: t.data.app_id, group_ids: t.data.group_ids }), VK.Util.removeEvent('message', this._onAddToGroupDone, window), this._onAddToGroupDone = null) }.bind(this), window.postMessage && VK.Util.addEvent('message', this._onAddToGroupDone, window), this._addToGroupPopup = VK.UI.popup({ url: VK._domain.base + '/add_community_app.php?aid=' + t, width: 560, height: 650 })) } }) }VK.UI || (VK.UI = { active: null, _buttons: [], popup (t) { let e; const o = void 0 !== window.screenX ? window.screenX : window.screenLeft; const i = void 0 !== window.screenY ? window.screenY : window.screenTop; const n = void 0 !== window.outerWidth ? window.outerWidth : document.body.clientWidth; const r = void 0 !== window.outerHeight ? window.outerHeight : document.body.clientHeight - 22; const s = t.width; const a = t.height; let d = parseInt(o + (n - s) / 2, 10); const l = parseInt(i + (r - a) / 2.5, 10); return e = 'width=' + s + ',height=' + a + ',left=' + (d = window.screen && window.screenX && screen.left && screen.left > 1e3 ? 0 : d) + ',top=' + l, this.active = window.open(t.url, 'vk_openapi', e), this.active }, button (t, e) { let o; typeof t === 'string' && (t = document.getElementById(t)), this._buttons.push(t), index = this._buttons.length - 1, o = '<table cellspacing="0" cellpadding="0" id="openapi_UI_' + index + '" onmouseover="VK.UI._change(1, ' + index + ');" onmouseout="VK.UI._change(0, ' + index + ');" onmousedown="VK.UI._change(2, ' + index + ');" onmouseup="VK.UI._change(1, ' + index + ');" style="cursor: pointer; border: 0px; font-family: tahoma, arial, verdana, sans-serif, Lucida Sans; font-size: 10px;"><tr style="vertical-align: middle"><td><div style="border: 1px solid #3b6798;border-radius: 2px 0px 0px 2px;-moz-border-radius: 2px 0px 0px 2px;-webkit-border-radius: 2px 0px 0px 2px;"><div style="border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 4px 0px 6px;line-height: 13px;">&#1042;&#1086;&#1081;&#1090;&#1080;</div></div></td><td><div style="background: url(' + VK._domain.base + '/images/btns.png) 0px -42px no-repeat; width: 21px; height: 21px"></div></td><td><div style="border: 1px solid #3b6798;border-radius: 0px 2px 2px 0px;-moz-border-radius: 0px 2px 2px 0px;-webkit-border-radius: 0px 2px 2px 0px;"><div style="border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 6px 0px 4px;line-height: 13px;">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1077;</div></div></td></tr></table>', t.innerHTML = o, t.style.width = t.childNodes[0].offsetWidth + 'px' }, _change (t, e) { for (var o = document.getElementById('openapi_UI_' + e).rows[0], i = [o.cells[0].firstChild.firstChild, o.cells[2].firstChild.firstChild], n = 0; n < 2; ++n) { const r = i[n]; t === 0 ? (r.style.backgroundColor = '#6D8DB1', r.style.borderTopColor = '#7E9CBC', r.style.borderLeftColor = r.style.borderRightColor = r.style.borderBottomColor = '#5C82AB') : t == 1 ? (r.style.backgroundColor = '#7693B6', r.style.borderTopColor = '#88A4C4', r.style.borderLeftColor = r.style.borderRightColor = r.style.borderBottomColor = '#6088B4') : t == 2 && (r.style.backgroundColor = '#6688AD', r.style.borderBottomColor = '#7495B8', r.style.borderLeftColor = r.style.borderRightColor = r.style.borderTopColor = '#51779F') }t === 0 || t == 2 ? o.cells[2].firstChild.style.backgroundPosition = '0px -42px' : t == 1 && (o.cells[2].firstChild.style.backgroundPosition = '0px -63px') } }), VK.XDM || (VK.XDM = { remote: null, init () { if (this.remote) { return !1 } const t = VK._domain.api + '/' + VK._path.proxy; this.remote = new fastXDM.Server({ onInit () { VK.xdReady = !0, VK.Observer.publish('xdm.init') } }), this.remote.append(document.getElementById(VK._rootId), { src: t }) }, xdHandler (code) { try { eval('VK.' + code) } catch (t) {} } }), VK.Observer || (VK.Observer = { _subscribers () { return this._subscribersMap || (this._subscribersMap = {}), this._subscribersMap }, publish (t) { let e; let o; const i = Array.prototype.slice.call(arguments); const n = (t = i.shift(), this._subscribers()[t]); if (n) { for (e = 0, o = n.length; e < o; e++) { n[e] != null && n[e].apply(this, i) } } }, subscribe (t, e) { const o = this._subscribers(); if (typeof e !== 'function') { return !1 } o[t] ? o[t].push(e) : o[t] = [e] }, unsubscribe (t, e) { let o; let i; const n = this._subscribers()[t]; if (!n) { return !1 } if (typeof e === 'function') { for (o = 0, i = n.length; o < i; o++) { n[o] == e && (n[o] = null) } } else { delete this._subscribers()[t] } } }), VK.Widgets || (VK.Widgets = {}, VK.Widgets.count = 0, VK.Widgets.RPC = {}, VK.Widgets.loading = function (t, e) { t.style.background = e ? 'url("' + VK._domain.base + '/images/upload.gif") center center no-repeat transparent' : 'none' }, VK.Widgets.Comments = function (t, e, o) { const i = VK.Util.getPageData(); if (!VK._apiId) { throw new Error('VK not initialized. Please use VK.init') } e = VK.Util.parseOptions(e); document.getElementById(t); let n; const r = { limit: e.limit || 10, height: e.height || 0, mini: void 0 === e.mini ? 'auto' : e.mini, norealtime: e.norealtime ? 1 : 0 }; const s = function () { return n.callMethod('mouseUp'), !1 }; const a = function (t) { n.callMethod('mouseMove', { screenY: t.screenY }) }; if (e.browse) { r.browse = 1, r.replies = e.replies || 0 } else { let d = e.pageUrl || i.url; d.substr(0, 1) == '/' && (d = location.protocol + '//' + location.host + d), VK.extend(r, { page: o || 0, status_publish: void 0 === e.autoPublish ? 0 : e.autoPublish, attach: void 0 === e.attach ? '*' : e.attach ? e.attach : '', url: d, title: e.pageTitle || i.title, description: e.pageDescription || i.description, image: e.pageImage || i.image }) } return e.onChange && (VK.Observer.subscribe('widgets.comments.new_comment', e.onChange), VK.Observer.subscribe('widgets.comments.delete_comment', e.onChange)), VK.Widgets._constructor('widget_comments.php', t, e, r, { showBox (t, e) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: n }).show() }, startDrag () { cursorBack = window.document.body.style.cursor, window.document.body.style.cursor = 'pointer', VK.Util.addEvent('mousemove', a), VK.Util.addEvent('mouseup', s) }, stopDrag () { window.document.body.style.cursor = cursorBack, VK.Util.removeEvent('mousemove', a), VK.Util.removeEvent('mouseup', s) } }, { startHeight: 133, minWidth: 300 }, function (t, e, o) { e, n = o }) }, VK.Widgets.CommentsBrowse = function (t, e) { return (e = VK.Util.parseOptions(e)).browse = 1, VK.Widgets.Comments(t, e) }, VK.Widgets.Recommended = function (t, e) { VK.Util.getPageData(); if (!VK._apiId) { throw new Error('VK not initialized. Please use VK.init') } const o = { limit: (e = VK.Util.parseOptions(e)).limit || 5, max: e.max || 0, sort: e.sort || 'friend_likes', verb: e.verb || 0, period: e.period || 'week', target: e.target || 'parent' }; return VK.Widgets._constructor('widget_recommended.php', t, e, o, {}, { startHeight: 116 + 47 * o.limit - 15, minWidth: 150 }) }, VK.Widgets.Post = function (t, e, o, i, n) { n = VK.Util.parseOptions(n); document.getElementById(t); let r; let s; const a = { owner_id: e, post_id: o, hash: i || '', from: n ? n.from : '' }; return VK.Widgets._constructor('widget_post.php', t, n, a, { showBox (t, e) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: r }).show() }, startDrag () { s = window.document.body.style.cursor, window.document.body.style.cursor = 'pointer' }, stopDrag () { window.document.body.style.cursor = s } }, { startHeight: 90, minWidth: 250 }, function (t, e, o) { e, r = o }) }, VK.Widgets.Like = (function (t) { if (t) { return t } const e = []; return (t = function (t, o, i) { const n = VK.Util.getPageData(); if (!VK._apiId) { throw new Error('VK not initialized. Please use VK.init') } let r; let s; let a; let d; let l; let c; const u = { 18: 43, 20: 47, 22: 51, 24: 55, 30: 67 }; const p = (o = VK.extend(VK.Util.parseOptions(o), { allowTransparency: !0 })).type == 'full' || o.type == 'button' || o.type == 'vertical' || o.type == 'mini' ? o.type : 'full'; const h = o.width === 'auto' && (p == 'button' || p == 'mini'); const f = parseInt(o.height, 10) || 22; const m = f && u[f] ? f : 22; const g = h ? 153 : p == 'full' ? Math.max(200, o.width || 350) : p == 'button' ? 180 : p == 'mini' ? 115 : u[m]; const _ = p == 'vertical' ? 2 * f + 7 : f; const v = { page: i || 0, url: o.pageUrl || n.url, type: p, verb: o.verb == 1 ? 1 : 0, color: o.color || '', title: o.pageTitle || n.title, description: o.pageDescription || n.description, image: o.pageImage || n.image, text: (o.text || '').substr(0, 140), h: f }; const y = o.ttHere || !1; let b = !1; let w = null; function K (t) { if ((b || t) && l && d && l && (d.style.display == 'none' || d.getAttribute('vkhidden') == 'yes')) { w && clearTimeout(w), c && clearTimeout(c); const e = o.getScrollTop ? o.getScrollTop() : document.body.scrollTop || document.documentElement.scrollTop || 0; const i = VK.Util.getXY(r, o.fixed); const n = y ? 0 : i[1]; e > i[1] - 120 && o.tooltipPos != 'top' || p == 'vertical' || o.tooltipPos == 'bottom' ? (d.style.top = n + _ + 2 + 'px', l.callMethod('show', !1, p + '_' + m)) : (d.style.top = n - 128 + 'px', l.callMethod('show', !0, p + '_' + m)), VK.Util.ss(d, { left: (y ? 0 : i[0]) - (p == 'full' || p == 'button' ? 32 : 2) + 'px', display: 'block', opacity: 1, filter: 'none' }), d.setAttribute('vkhidden', 'no'), b = !0 } } function V (t) { b && !t || !l || (l.callMethod('hide'), a.callMethod('hide'), w = setTimeout(function () { d.style.display = 'none' }, 400)) }p != 'vertical' && p != 'button' && p != 'mini' || delete o.width, h && (v.auto_width = 1); const x = VK.Widgets._constructor('widget_like.php', t, o, v, { initTooltip (t) { l = new fastXDM.Server({ onInit: t ? function () { K() } : function () {}, proxy: a, showBox (t, e) { VK.Util.Box(VK.Util.getAbsUrl(t), [e.width, e.height], { proxy: l }).show() } }, !1, { safe: !0 }), (d = l.append(y ? r : document.body, { src: s.src + '&act=a_like_tooltip', scrolling: 'no', allowTransparency: !0, id: s.id + '_tt', style: { position: 'absolute', padding: 0, display: 'none', opacity: 0.01, filter: 'alpha(opacity=1)', border: '0', width: '274px', height: '130px', zIndex: 5e3, overflow: 'hidden' } })).setAttribute('vkhidden', 'yes'), d.onmouseover = function () { clearTimeout(c), b = !0 }, d.onmouseout = function () { clearTimeout(c), b = !1, c = setTimeout(function () { V() }, 200) } }, showTooltip: K, hideTooltip: V, destroy () { a.destroy(); try { s.src = 'about: blank;' } catch (t) {} if (s.parentNode.removeChild(s), d) { try { d.src = 'about: blank;' } catch (t) {}d.parentNode.removeChild(d) }l && l.destroy() }, showBox (t, e) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: a }).show() }, proxy () { l && l.callMethod.apply(l, arguments) } }, { startHeight: _, minWidth: g }, function (t, e, o) { a = o, VK.Util.ss(r = t, { height: _ + 'px', width: g + 'px', position: 'relative', clear: 'both' }), VK.Util.ss(s = e, { height: _ + 'px', width: g + 'px', overflow: 'hidden', zIndex: 150 }), r.onmouseover = function () { clearTimeout(c), b = !0 }, r.onmouseout = function () { clearTimeout(c), b = !1, c = setTimeout(function () { V() }, 200) } }); return e.push(x), x }).destroyAll = function () { for (let t = null; e[0];) { (t = VK.Widgets.RPC[e.pop()]) && t.methods.destroy() } }, t }(VK.Widgets.Like)), VK.Widgets.Poll = function (t, e, o) { const i = VK.Util.getPageData(); if (!o) { throw new Error('No poll id passed') } let n; const r = { poll_id: o, url: (e = VK.Util.parseOptions(e)).pageUrl || i.url || location.href, title: e.pageTitle || i.title, description: e.pageDescription || i.description }; return e.preview && (r.is_preview = 1, delete e.preview), void 0 !== e.share && (r.share = e.share ? 1 : 0), VK.Widgets._constructor('al_widget_poll.php', t, e, r, { showBox (t, e) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: n }).show() } }, { startHeight: 144, minWidth: 300 }, function (t, e, o) { n = o }) }, VK.Widgets.App = function (t, e, o) { if (!e) { throw new Error('No app id passed') } o = VK.Util.parseOptions(o); let i; let n = void 0; let r = void 0; const s = { aid: e, mode: parseInt(o.mode, 10) || 1 }; switch (s.mode) { case 1:o.width = 144, n = 251; break; case 2:o.width = o.width ? Math.max(200, Math.min(1e4, parseInt(o.width, 10))) : 200, r = n = 193; break; case 3:o.width = o.width ? Math.max(50, Math.min(1e4, parseInt(o.width, 10))) : void 0, r = n = o.height = { 18: 18, 20: 20, 22: 22, 24: 24, 30: 30 }[parseInt(o.height, 10) || 30] } return i = o.width, VK.Widgets._constructor('widget_app.php', t, o, s, {}, { startHeight: n, height: r, minWidth: i }) }, VK.Widgets.Community = VK.Widgets.Group = function (t, e, o) { if (e = VK.Util.parseOptions(e), !(o = parseInt(o, 10))) { throw new Error('No group_id passed') } e.mode = parseInt(e.mode, 10).toString(); let i; let n; const r = { gid: o, mode: e.mode ? e.mode : '0' }; const s = e.mode == 3 ? 185 : e.mode == 1 ? 141 : 0 | e.height || 290; function a () { return i.callMethod('mouseUp'), !1 } function d (t) { return i.callMethod('mouseMove', { screenY: t.screenY }), !1 } return e.wall && (r.wall = e.wall), r.color1 = e.color1 || '', r.color2 = e.color2 || '', r.color3 = e.color3 || '', r.class_name = e.class_name || '', e.no_head && (r.no_head = 1), e.no_cover && (r.no_cover = 1), e.wide && (r.wide = 1, (!e.width || e.width < 300) && (e.width = 300)), 0 | !e.width && (e.width = 200), VK.Widgets._constructor('widget_community.php', t, e, r, { showBox (t, e) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: i }).show() }, startDrag () { n = window.document.body.style.cursor, window.document.body.style.cursor = 'pointer', VK.Util.addEvent('mousemove', d), VK.Util.addEvent('mouseup', a) }, stopDrag () { window.document.body.style.cursor = n, VK.Util.removeEvent('mousemove', d), VK.Util.removeEvent('mouseup', a) }, auth () { VK.Auth.login(null, 1) } }, { minWidth: 120, startHeight: s }, function (t, e, o) { i = o }) }, VK.Widgets.Auth = function (t, e) { VK.Util.getPageData(); if (!VK._apiId) { throw new Error('VK not initialized. Please use VK.init') } return (e = VK.Util.parseOptions(e)).width || (e.width = 200), e.type ? type = 1 : type = 0, VK.Widgets._constructor('widget_auth.php', t, e, {}, { makeAuth (t) { if (t.session && (VK.Auth._loadState = 'loaded', VK.Auth.setSession(t.session, 'connected'), VK.Observer.publish('auth.loginStatus', { session: t.session, status: 'connected' }), VK.Observer.unsubscribe('auth.loginStatus')), e.onAuth) { e.onAuth(t) } else { if (e.authUrl) { var o = e.authUrl } else { o = window.location.href }!o.includes('?') ? o += '?' : o += '&'; const i = []; for (const n in t) { n != 'session' && i.push(n + '=' + decodeURIComponent(t[n]).replace(/&/g, '%26').replace(/\#/g, '%23').replace(/\?/, '%3F')) } window.location.href = o + i.join('&') } } }, { startHeight: 134 }) }, VK.Widgets.Subscribe = function (t, e, o) { if (!(o = parseInt(o, 10))) { throw new Error('No owner_id passed') } let i; const n = { oid: o }; return (e = VK.Util.parseOptions(e)).mode && (n.mode = e.mode), e.soft && (n.soft = e.soft), VK.Widgets._constructor('widget_subscribe.php', t, e, n, { showBox (t, e) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: i }).show() }, auth () { VK.Auth.login(null, 1) } }, { minWidth: 220, startHeight: 22 }, function (t, e, o) { i = o }) }, VK.Widgets.ContactUs = function (t, e, o) { if (!(o = parseInt(o, 10))) { throw new Error('No group or user id passed') } e = VK.Util.parseOptions(e); const i = { oid: o, height: { 18: 18, 20: 20, 22: 22, 24: 24, 30: 30 }[parseInt(e.height, 10) || 24], text: (e.text || '').substr(0, 140) }; return VK.Widgets._constructor('widget_contactus.php', t, e, i, {}, { startHeight: i.height, height: i.height }, function (t, e, o) { o }) }, VK.Widgets.Bookmarks = function (t, e) { e = VK.Util.parseOptions(e); const o = { height: { 18: 18, 20: 20, 22: 22, 24: 24, 30: 30 }[parseInt(e.height, 10) || 30], url: e.url || window.location.href }; return VK.Widgets._constructor('widget_bookmarks.php', t, e, o, {}, { startHeight: o.height, height: o.height }, function (t, e, o) { o }) }, VK.Widgets.Playlist = function (t, e, o, i, n) { let r; const s = { oid: parseInt(e, 10), pid: parseInt(o, 10), hash: i || '' }; if (!s.oid) { throw new Error('No owner id passed') } if (!s.pid) { throw new Error('No playlist id passed') } return n = VK.Util.parseOptions(n), VK.Widgets._constructor('widget_playlist.php', t, n, s, { showBox (t, e) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: r }).show() } }, { minWidth: 200 }, function (t, e, o) { r = o }) }, VK.Widgets.Ads = function (t, e, o) { e = VK.Util.parseOptions(e), o = o || {}; let i; const n = {}; const r = {}; const s = {}; let a = document.getElementById(t); const d = {}; const l = {}; const c = {}; for (const u in o) { const p = (function (t, e, o) { for (let i = o || 0, n = (t || []).length; i < n; i++) { if (t[i] == e) { return i } } return -1 }(['hash'], u)) != -1 ? u : 'ads_' + u; d[p] = o[u] } if (a && a.getBoundingClientRect) { a.style.width = '100%', a.style.height = '100%'; const h = a.getBoundingClientRect(); a.style.width = '', a.style.height = '', d.ads_ad_unit_width_auto = Math.floor(h.right - h.left), d.ads_ad_unit_height_auto = Math.floor(h.bottom - h.top) } return c.ads_ad_unit_width = 100, c.ads_ad_unit_height = 100, l.ads_ad_unit_width = parseInt(d.ads_ad_unit_width) || d.ads_ad_unit_width === 'auto' && d.ads_ad_unit_width_auto || c.ads_ad_unit_width, l.ads_ad_unit_height = parseInt(d.ads_ad_unit_height) || d.ads_ad_unit_height === 'auto' && d.ads_ad_unit_height_auto || c.ads_ad_unit_height, d.ads_handler && (l.ads_handler = d.ads_handler), d.ads_handler_empty_html && (l.ads_handler_empty_html = d.ads_handler_empty_html), delete d.ads_handler, delete d.ads_handler_empty_html, n.act = 'ads_web', n.url = location.href, VK.extend(n, d), e.noDefaultParams = !0, e.width = l.ads_ad_unit_width, e.allowTransparency = !0, r.startHeight = l.ads_ad_unit_height, r.minWidth = l.ads_ad_unit_width, s.adsOnInit = function (t, o) { VK.Widgets.loading(a, !1), (function (t) { if (t) { for (const e in t) { const o = t[e]; e === 'ads_ad_unit_width' || e === 'ads_ad_unit_height' ? e in d || (l[e] = parseInt(o) || o === 'auto' && d[e + '_auto'] || c[e]) : e in l || (l[e] = o) } } }(o)), e.onAdsReady && e.onAdsReady.apply(e.onAdsReady, Array.prototype.slice.call(arguments)); !(function (t) { const e = (function (t) { let e = !1; try { if (!t) { return !1 } let o = !1; if (l(t)) { o = t } else if (d = t, Object.prototype.toString.call(d) === '[object String]') { const i = t.split('.'); o = window; for (let n = 0, r = i.length; n < r && (o = o[i[n]]); n++) { ; } if (!o) { t.substr(0, 8) === 'function' && (t = 'return ' + t + ';'); const s = new Function(t)(); l(s) ? o = s : e = s } } if (o) { const a = Array.prototype.slice.call(arguments, 1); e = o.apply(o, a) } } catch (t) { try { console.error(t) } catch (t) {} } let d; return e; function l (t) { return Object.prototype.toString.call(t) === '[object Function]' } }(l.ads_handler, t)); if (t <= 0 && !0 !== e) { try { console.log('VK: ad_unit_id = ' + d.ads_ad_unit_id, ', errorCode = ', t) } catch (t) {}!(function (t, e, o) { if (!t) { return } if (!a) { return } e = e ? e + 'px' : '', o = o ? o + 'px' : ''; const n = '<html><head></head><body style="padding: 0; margin: 0;"><div>' + t + '</div></body></html>'; const r = document.createElement('iframe'); r.onload = function () { if (o) { return } try { const t = r.contentWindow.document.body.firstChild.getBoundingClientRect(); const e = Math.ceil(t.bottom - t.top); e && (r.style.height = e, a.style.height = e) } catch (t) {} }, r.id = (i ? i.id : 'vkwidget-' + Math.round(1e6 * Math.random())) + '_ads_html_handler', r.src = 'about:blank', r.width = '100%', r.height = '100%', r.scrolling = 'no', r.frameBorder = '0', r.allowTransparency = !0, r.style.overflow = 'hidden', r.style.width = e, r.style.height = o, a.style.width = e, a.style.height = o, a.appendChild(r), r.contentWindow.vk_ads_html_handler = n, r.src = 'javascript:window["vk_ads_html_handler"]' }(l.ads_handler_empty_html, l.ads_ad_unit_width, l.ads_ad_unit_height)) } }(t)) }, s.newAdsOnInitLoader = function (t) { !(function (t) { if ('vk__adsLight' in window) { window.vk__adsLight && vk__adsLight.userHandlers && vk__adsLight.userHandlers.onInit && vk__adsLight.userHandlers.onInit(!1) } else { window.vk__adsLight = !1; const e = VK.Api && VK.Api.attachScript || VK.addScript; if (Array.isArray(t)) { t.forEach(function (t) { e(VK._domain.base + t) }) } else { const o = parseInt(t); e(VK._domain.base + jsc('/web/ads_light.js?') + o) } } }(JSON.parse(t.replace(/&#039;/g, "'").replace(/&quot;/g, '"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&')))) }, VK.Widgets._constructor('ads_rotate.php', t, e, n, s, r, function (t, e, o) { a = t, i = e, o }) }, VK.Widgets.AllowMessagesFromCommunity = function (t, e, o) { if (!(o = parseInt(o, 10)) || o < 0) { throw new Error('No group id passed') } e = VK.Util.parseOptions(e); const i = { height: { 22: 22, 24: 24, 30: 30 }[parseInt(e.height, 10) || 24], key: e.key ? e.key.substr(0, 256) : '', group_id: o }; return VK.Widgets._constructor('widget_allow_messages_from_community.php', t, e, i, {}, { startHeight: i.height, height: i.height }, function (t, e, o) { o }) }, VK.Widgets.Article = function (t, e, o) { let i; const n = { url: e }; return o = VK.Util.parseOptions(o), VK.Widgets._constructor('widget_article.php', t, o, n, { showBox (t) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: i }).show() } }, {}, function (t, e, o) { i = o }) }, VK.Widgets.Podcast = function (t, e, o, i) { const n = { episode: e, hash: o }; return i = VK.Util.parseOptions(i), VK.Widgets._constructor('widget_podcast.php', t, i, n, { showBox (t) { VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: rpc }).show() } }, { minWidth: 300, startHeight: 150 }) }, VK.Widgets.CommunityMessages = (function (t) { if (t) { return t } const e = {}; const o = {}; const i = { no_button: { width: 0, height: 0 }, blue_circle: { width: 50, height: 50, margin: { bottom: 20 } } }; const n = { left: { bottom: 0, left: 20 }, right: { bottom: 0, right: 20 } }; const r = 'right'; return (t = function (s, a, d) { (d = VK.Util.parseOptions(d)).width = 300, d.height = 399, d.expandTimeout = parseInt(d.expandTimeout) || 0; const l = { gid: a }; d.expanded = parseInt(d.expanded) || 0, (!d.from_dev && (function (t) { if (!window.localStorage) { return null } return localStorage.getItem('vk_community_widget_' + t) }('expanded')) != null || d.expanded) && (d.shown = 1), d.shown && (l.shown = 1), d.welcomeScreen || (l.disable_welcome_screen = 1), l.ref_source_info = d.ref_source_info, l.ref_source_link = location.href; let c = d.buttonType; !Object.keys(i).includes(c) && (c = 'blue_circle'), c == 'no_button' && (d.disableButtonTooltip = 1), d.disableButtonTooltip && (l.disable_tooltip = 1), d.tooltipButtonText && (l.tooltip_text = d.tooltipButtonText), d.disableNewMessagesSound && (l.disable_new_messages_sound = 1), e[s] && t.destroy(s), l.domain = document.domain, d.no_loading = 1; let u; let p; let h; let f = !1; let m = 0; let g = [0, 0]; K(d.widgetPosition), l.button_position = d.widgetPosition; let _ = 0; const v = {}; function y () { d.disableTitleChange || (clearTimeout(o.titleTimer), o.oldTitle ? document.title = o.oldTitle : o.oldTitle === null && (document.title = ''), o.title = '') } function b () { const t = document.getElementById(s); const e = t.getElementsByTagName('iframe')[0]; t.style.width = e.width = '372px', t.style.height = e.height = '399px', t.style.margin = '0px 0px 0px 0px' } function w () { const t = document.getElementById(s); const e = t.getElementsByTagName('iframe')[0]; const o = i[c]; const n = o.width + g[0]; const r = Math.max(o.height, g[1]); t.style.width = n + 'px', t.style.height = r + 'px', e.style.boxShadow = 'none'; const a = o.margin ? o.margin : {}; t.style.margin = '0px ' + (a.right || 0) + 'px ' + (a.bottom || 0) + 'px 0px', e && (e.width = n, e.height = r) } function K (t) { u = t, !Object.keys(n).includes(u) && (u = r), V(), x('changeButtonPosition', u) } function V () { const t = document.getElementById(s); if (t) { const e = ['left', 'right', 'top', 'bottom']; for (var o in e) { t.style[e[o]] = '' } const i = n[u]; for (var o in i) { t.style[o] = i[o] + 'px' }_ && (m ? b() : w()) } } function x () { p && p.callMethod.apply(p, arguments) } function I (t) { t && Object.prototype.toString.call(t) === '[object Object]' || (t = {}), t.welcomeScreen == null && (t.welcomeScreen = d.welcomeScreen), clearTimeout(v.showTimer), x('expand', t) } function k (t) { x('setSourceData', VK.extend({ link: location.href }, t)) } return e[s] = VK.Widgets._constructor('widget_community_messages.php', s, d, l, { onStartLoading () { const t = document.getElementById(s); t.style.position = 'fixed', t.style['z-index'] = 1e4, V() }, onReady () { _ = 1, d.expandTimeout > 0 && !d.shown && (v.showTimer = setTimeout(function () { I({ playSong: !d.disableExpandChatSound, noSaveState: 1 }) }, d.expandTimeout)) }, showBox (t) { if (f) { try { f.hide(); try { f.iframe.src = 'about: blank;' } catch (t) {}f.iframe.parentNode.removeChild(f.iframe) } catch (t) {} }(f = VK.Util.Box(VK.Util.getAbsUrl(t), [], { proxy: p }, { zIndex: 10002 })).show() }, setTooltipSize (t) { g = t, m || w() }, expand (t) { let e, o; t = t || {}, m = 1, b(), t.noSaveState || (e = 'expanded', o = 1, window.localStorage && localStorage.setItem('vk_community_widget_' + e, o)) }, minimize () { setTimeout(function () { let t; m = 0, w(), t = 'expanded', window.localStorage && localStorage.removeItem('vk_community_widget_' + t) }, 120) }, canNotWrite (t) { d.onCanNotWrite && d.onCanNotWrite(t) }, destroy () { p.destroy(); try { h.src = 'about: blank;' } catch (t) {} try { h.parentNode.removeChild(h) } catch (t) {} }, fatalError (e, o) { const i = { code: e, widget: 2, public_id: o }; e == 1903 && (i.referrer_domain = document.domain); const n = []; for (const r in i) { n.push(r + '=' + i[r]) }t.destroy(s), VK.Util.Box(VK.Util.getAbsUrl('blank.php?' + n.join('&'))).show() }, setPageTitle (t) { d.disableTitleChange || (y(), o.oldTitle = document.title || null, o.title = t, o.changeTitleMode = 0, (function t (e) { clearTimeout(o.titleTimer); o.titleTimer = setTimeout(function () { o.changeTitleMode == 1 ? document.title = o.oldTitle || '' : document.title = o.title, o.changeTitleMode = o.changeTitleMode == 1 ? 0 : 1, t() }, e ? 0 : 1500) }(1))) }, resetPageTitle () { y() }, newMessage () { !document.hasFocus || document.hasFocus() || d.disableNewMessagesSound || x('playNewMsgSong') } }, {}, function (t, e, o) { p = o, h = e, d.shown ? b() : w() }), VK.Util.addEvent('popstate', k.bind(this, {}), window), VK.Util.addEvent('hashchange', k.bind(this, {}), window), { expand: I, minimize () { x('minimize') }, destroy () { y(), t.destroy(s) }, setSourceData: k, changeButtonPosition: K, stopTitleAnimation: y } }).destroy = function (t) { if (e[t]) { const o = VK.Widgets.RPC[e[t]]; o && o.methods.destroy(), delete e[t] } }, t.expand = function (t) { console.log(e[t]) }, t }(VK.Widgets.CommunityMessages)), VK.Widgets._constructor = function (t, e, o, i, n, r, s, a, d) { const l = document.getElementById(e); if (a = a || ++VK.Widgets.count, !l) { if ((d = d || 0) > 10) { throw new Error('VK.Widgets: object #' + e + ' not found.') } return setTimeout(function () { VK.Widgets._constructor(t, e, o, i, n, r, s, a, d + 1) }, 500), a }r = r || {}, n = n || {}, (o = o || {}).preview && (i.preview = 1, delete o.preview); let c; let u; let p; let h; let f; let m; let g = o.width === 'auto' ? 0 | (l.clientWidth || l.offsetWidth || r.minWidth) : parseInt(o.width || 0, 10); i.act === 'silent_code' ? (g = '1px', l.style.opacity = 0, l.style.display = 'none', l.style.position = 'absolute') : g = g ? Math.max(r.minWidth || 200, Math.min(r.maxWidth || 1e4, g)) + 'px' : '100%', l.style.width = g, o.height ? (i.height = o.height, l.style.height = o.height + 'px') : l.style.height = (r.startHeight || 200) + 'px', g === '100%' && (i.startWidth = 0 | (l.clientWidth || l.offsetWidth)), i.url || (i.url = o.pageUrl || location.href.replace(/#.*$/, '')), c = VK._domain.base + '/' + t, u = '', o.noDefaultParams || (u += '&app=' + (VK._apiId || '0') + '&width=' + encodeURIComponent(g)), u += '&_ver=' + VK.version, VK._iframeAppWidget && (i.iframe_app = 1); const _ = VK.Util.getPageData(); for (m in i.url = i.url || _.url || '', i.referrer = i.referrer || document.referrer || '', i.title = i.title || _.title || document.title || '', i) { if (m == 'title' && i[m].length > 80 && (i[m] = i[m].substr(0, 80) + '...'), m == 'description' && i[m].length > 160 && (i[m] = i[m].substr(0, 160) + '...'), typeof i[m] === 'number') { p = i[m] } else { try { p = encodeURIComponent(i[m]) } catch (t) { p = '' } }u += '&' + m + '=' + p }c += '?' + (u += '&' + (+new Date()).toString(16)).substr(1), n.onStartLoading && n.onStartLoading(), o.no_loading || VK.Widgets.loading(l, !0), n.showLoader = function (t) { VK.Util.Loader(t) }, n.publish = function () { const t = Array.prototype.slice.call(arguments); t.push(a), VK.Observer.publish.apply(VK.Observer, t) }, n.onInit = function () { VK.Widgets.loading(l, !1), n.onReady && n.onReady(), o.onReady && o.onReady() }, n.resize = function (t, e) { l.style.height = t + 'px'; const o = document.getElementById('vkwidget' + a); o && (o.style.height = t + 'px') }, n.resizeWidget = function (t, e) { t = parseInt(t), e = parseInt(e); const i = document.getElementById('vkwidget' + a); isFinite(t) && (l.style.width = t + 'px', i && (i.style.width = t + 'px')), isFinite(e) && (l.style.height = e + 'px', i && (i.style.height = e + 'px')), o.onResizeWidget && o.onResizeWidget() }, n.updateVersion = function (t) { t > 1 && VK.Api.attachScript('//vk.com/js/api/openapi_update.js?' + parseInt(t)) }, h = VK.Widgets.RPC[a] = new fastXDM.Server(n, function (t) { return !t || (t = t.toLowerCase()).match(/(\.|\/)vk\.com($|\/|\?)/) }, { safe: !0 }); let v = { overflow: 'hidden' }; return o.custom_style && typeof o.custom_style === 'object' && (v = VK.extend(v, o.custom_style)), f = VK.Widgets.RPC[a].append(l, { src: c, width: g.includes('%') ? g : parseInt(g) || g, height: r.startHeight || '100%', scrolling: 'no', id: 'vkwidget' + a, allowTransparency: o.allowTransparency || !1, style: v }), s && setTimeout(function () { s(l, f || l.firstChild, h) }, 10), a }), VK.Util || (VK.Util = { getPageData () { if (!VK._pData) { let t; const e = document.getElementsByTagName('meta'); const o = {}; const i = ['description', 'title', 'url', 'image', 'app_id']; for (const n in e) { if (e[n].getAttribute && e[n].getAttribute && ((t = e[n].getAttribute('name')) || (t = e[n].getAttribute('property')))) { for (const r in i) { t != i[r] && t != 'og:' + i[r] && t != 'vk:' + i[r] || (o[i[r]] = e[n].content) } } }o.app_id && !VK._apiId && (VK._apiId = o.app_id), o.title = o.title || document.title || '', o.description = o.description || '', o.image = o.image || '', !o.url && VK._iframeAppWidget && VK._apiId && (o.url = '/app' + VK._apiId, VK._browserHash && (o.url += VK._browserHash)); const s = location.href.replace(/#.*$/, ''); o.url && o.url.indexOf(s) || (o.url = s), VK._pData = o } return VK._pData }, getStyle (t, e) { let o; const i = document.defaultView || window; if (i.getComputedStyle) { e = e.replace(/([A-Z])/g, '-$1').toLowerCase(); const n = i.getComputedStyle(t, null); n && (o = n.getPropertyValue(e)) } else if (t.currentStyle) { const r = e.replace(/\-(\w)/g, function (t, e) { return e.toUpperCase() }); o = t.currentStyle[e] || t.currentStyle[r] } return o }, getAbsUrl (t) { return VK._domain.base + '/' + t.replace(/^\s*\/?/, '') }, parseOptions (t) { return Object.prototype.toString.call(t) !== '[object Object]' && (t = {}), t.base_domain && (VK._domain.base = t.base_domain), t.login_domain && (VK._domain.login = t.login_domain), t }, getXY (t, e) { if (t && void 0 !== t) { let o = 0; let i = 0; if (void 0 !== t.getBoundingClientRect) { const n = t.getBoundingClientRect(); o = n.left, i = n.top, e = !0 } else if (t.offsetParent) { do { o += t.offsetLeft, i += t.offsetTop, e && (o -= t.scrollLeft, i -= t.scrollTop) } while (t = t.offsetParent) } return e && (i += window.pageYOffset || window.scrollNode && scrollNode.scrollTop || document.documentElement.scrollTop, o += window.pageXOffset || window.scrollNode && scrollNode.scrollLeft || document.documentElement.scrollLeft), [o, i] } }, Loader: function t (e) { t.loader || ((t.loader = document.createElement('DIV')).innerHTML = '<style type="text/css">        @-webkit-keyframes VKWidgetsLoaderKeyframes {0%{opacity: 0.2;}30%{opacity: 1;}100%{opacity: 0.2;}}        @keyframes VKWidgetsLoaderKeyframes {0%{opacity: 0.2;}30%{opacity: 1;}100%{opacity: 0.2;}}        .VKWidgetsLoader div {width: 7px;height: 7px;-webkit-border-radius: 50%;-khtml-border-radius: 50%;-moz-border-radius: 50%;border-radius: 50%;background: #fff;top: 21px;position: absolute;z-index: 2;-o-transition: opacity 350ms linear; transition: opacity 350ms linear;opacity: 0.2;-webkit-animation-duration: 750ms;-o-animation-duration: 750ms;animation-duration: 750ms;-webkit-animation-name: VKWidgetsLoaderKeyframes;-o-animation-name: VKWidgetsLoaderKeyframes;animation-name: VKWidgetsLoaderKeyframes;-webkit-animation-iteration-count: infinite;-o-animation-iteration-count: infinite;animation-iteration-count: infinite;-webkit-transform: translateZ(0);transform: translateZ(0);}</style><div class="VKWidgetsLoader" style="position: fixed;left: 50%;top: 50%;margin: -25px -50px;z-index: 1002;height: 50px;width: 100px;"><div style="left: 36px;-webkit-animation-delay: 0ms;-o-animation-delay: 0ms;animation-delay: 0ms;"></div><div style="left: 47px;-webkit-animation-delay: 180ms;-o-animation-delay: 180ms;animation-delay: 180ms;"></div><div style="left: 58px;-webkit-animation-delay: 360ms;-o-animation-delay: 360ms;animation-delay: 360ms;"></div><span style="display: block;background-color: #000;-webkit-border-radius: 4px;-khtml-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;-webkit-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);-moz-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);position: absolute;left: 0;top: 0;bottom: 0; right: 0;z-index: 1;opacity: 0.7;"></span></div>', document.body.insertBefore(t.loader, document.body.firstChild)), t.loader.style.display = e ? 'block' : 'none' }, Box (t, e, o, i) { o = o || {}; const n = document.body.style.overflow; VK.Util.Loader(!0); const r = /(^|\.)(vk\.com|vkontakte\.ru)$/.test(location.hostname); const s = new fastXDM.Server(VK.extend(o, { onInit () { a.style.background = 'transparent', a.style.visibility = 'visible', document.body.style.overflow = 'hidden', a.setAttribute('allowfullscreen', 1), r && (document.body.className += ' layers_shown'), VK.Util.Loader() }, hide () { a.style.display = 'none' }, tempHide () { a.style.left = '-10000px', a.style.top = '-10000px', a.style.width = '10px', a.style.height = '10px', r && (document.body.className = document.body.className.replace(/\b\s*?layers_shown\s*\b/, ' ')), document.body.style.overflow = n }, destroy () { try { a.src = 'about: blank;' } catch (t) {}a.parentNode.removeChild(a), r && (document.body.className = document.body.className.replace(/\b\s*?layers_shown\s*\b/, ' ')), document.body.style.overflow = n }, resize (t, e) {} }, !0), !1, { safe: !0 }); var a = s.append(document.body, { src: t.replace(/&amp;/g, '&'), scrolling: 'no', allowTransparency: !0, style: { position: 'fixed', left: 0, top: 0, zIndex: i && i.zIndex || 1002, background: VK._domain.base + '/images/upload.gif center center no-repeat transparent', padding: '0', border: '0', width: '100%', height: '100%', overflow: 'hidden', visibility: 'hidden' } }); return { show (t, e) { a.style.display = 'block', document.body.style.overflow = 'hidden' }, hide () { a.style.display = 'none', document.body.style.overflow = n }, iframe: a, rpc: s } }, addEvent (t, e, o) { (o = o || window.document).addEventListener ? o.addEventListener(t, e, !1) : o.attachEvent && o.attachEvent('on' + t, e) }, removeEvent (t, e, o) { (o = o || window.document).removeEventListener ? o.removeEventListener(t, e, !1) : o.detachEvent && o.detachEvent('on' + t, e) }, ss (t, e) { VK.extend(t.style, e, !0) } }), VK.Retargeting || (VK.Retargeting = { pixelCode: null, Init (t) { return this.pixelCode = t, this }, Event (t) { if (this.pixelCode) { const e = VK.Util.getPageData().url.substr(0, 500); (window.Image ? new Image() : document.createElement('img')).src = 'https://vk.com/rtrg?p=' + this.pixelCode + (t ? '&event=' + encodeURIComponent(t) : '') + (e ? '&metatag_url=' + encodeURIComponent(e) : '') } }, Hit () { this.Event() }, Add (t) { this.pixelCode && t && ((window.Image ? new Image() : document.createElement('img')).src = 'https://vk.com/rtrg?p=' + this.pixelCode + '&audience=' + encodeURIComponent(t)) }, ProductEvent (t, e, o, i) { if (this.pixelCode && e && t) { let n = !0; void 0 !== (i = i || {}).show_errors && (n = !!i.show_errors); let r = '0'; void 0 !== i.errors_ignore && (r = i.errors_ignore ? '1' : '0'); const s = VK.Util.getPageData().url.substr(0, 500); const a = o ? JSON.stringify(o) : ''; const d = { p: this.pixelCode, products_event: e, price_list_id: t, e: '1', i: r, metatag_url: s }; a && (d.products_params = a); const l = 'https://vk.com/rtrg?' + Object.keys(d).map(function (t) { return encodeURIComponent(t) + '=' + encodeURIComponent(d[t]) }).join('&'); VK.Api.makeRequest(l, this.onDone.bind(this, n)) } }, onDone (t, e) { if (e && t) { let o; try { o = JSON.parse(e) } catch (t) { return }o && o.errors && this.showErrors(o.errors) } }, showErrors (t) { if (t || t.length) { const e = 'VK Pixel Error (' + this.pixelCode + '): '; if (typeof t !== 'string') { const o = t.length; if (o) { for (let i = 0; i < o; i++) { console.error(e + t[i]) } } } else { console.error(e + t) } } } }), VK.Pixel || (VK.Pixel = function (t) { if (this.constructor != VK.Pixel) { throw new Error("VK.Pixel was called without 'new' operator") } return VK.extend(this, VK.Retargeting), this.pixelCode = t, this.Goal = function (e, o) { return VK.Goal(e, o, t) }, this }), VK.Goal || (VK.Goal = function (t, e, o) { const i = o || VK.Retargeting.pixelCode; if (i && typeof i === 'string') { const n = t || 'conversion'; if (typeof n === 'string') { const r = (e || {}).value || 0; if (typeof r === 'string') { if (parseFloat(r).toString() !== r) { return void console.error('Error argument: parameters.value not a number or valid number string') } } else if (typeof r !== 'number') { return void console.error('Error argument: parameters.value not a number or valid number string') } const s = { p: i, e: '1', c: n, v: r }; const a = 'https://vk.com/rtrg?' + Object.keys(s).map(function (t) { return encodeURIComponent(t) + '=' + encodeURIComponent(s[t]) }).join('&'); VK.Api.makeRequest(a, VK.Retargeting.onDone.bind(VK.Retargeting, !0)) } else { console.error('Error argument: conversionName not a string') } } else { console.error('Error argument: pixelCode not a string. Use VK.Retargeting.Init or VK.Pixel to initialize pixel') } }), window.vkAsyncInit && setTimeout(vkAsyncInit, 0), window.vkAsyncInitCallbacks && vkAsyncInitCallbacks.length && setTimeout(function () { for (var t; t = vkAsyncInitCallbacks.pop();) { try { t() } catch (t) { try { console.error(t) } catch (t) {} } } }, 0); try { stManager.done('api/openapi.js') } catch (t) {}

// VK pixel
!(function () { const t = document.createElement('script'); t.type = 'text/javascript', t.async = !0, t.onload = function () { VK.Retargeting.Init('VK-RTRG-518954-fF7rQ'), VK.Retargeting.Hit() }, document.head.appendChild(t) }())

// VK chat
VK.Widgets.CommunityMessages('vk_community_messages', 197531682, { disableExpandChatSound: '1', disableNewMessagesSound: '1', tooltipButtonText: 'Есть вопрос?' })
